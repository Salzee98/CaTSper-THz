# CaTx (CambridgeTHzConverter) Tutorial

## Introduction
This page gives detailed guidance to use the "CaTx" (or "CambridgeTHzConverter"). The input will be the raw data generated by the terahertz spectrometer software ([click here for sample data files](https://github.com/dotTHzTAG/CaTx/tree/main/Example%20Data)).

This tool provides an platform to collate the raw sample and reference waveform(s) into a single standardised [.thz file](/thz_file_format.md). Other metadata captured from different sources can also be included in this file format, including but not limit to sample thickness, temperature and other contextual information. The output ".thz" file will be an essential input for the "Catsper".

When the user lunches the CaTx, the following UI will display:

![catx main GUI](/images/catx_gui.png)

## Load the raw dataset
Catsper will read the .thz file created by CaTx. The first step is to convert the data strcutre generated by the terahertz instrument into the .thz file format. In this example, the Terapulse 4000 (Teraview) spectrometer record the data in the .tprj document.

Click the “IMPORT MEASUREMENTS” button to browse the folder and select the raw data file for conversion. The selected document’s name will appear in the textbox with the suffix (.tprj here). The user need to choose the correct “Converter Engine” that can recognise the dataset. For Terapulse 4000 (Teraview) spectrometer, “TeraPulse 4000_UCAM” should be selected.

NOTICE: A message will display in the dropdown box "No engines available. Please check m files in .\engine folder." if there is no relevant ".m" engine document in the .\engine folder under the same directory as the converter app. The user can download the engines from [here](https://github.com/dotTHzTAG/CaTx/tree/main/Engines).

Click the “Deploy Data” button and the App will read the raw data. A message “Loading…” followed by the “…%” will appear at the upper right corner showing the extent of conversion.

When the conversion finishes, the message “Conversion Complete” will appear and the data will be recorded in the table shown at the centre panel. User can check if the data have been correctly converted in this panel. The following screenshot presents what the user should expect at this stage:

![catsperMATconverter successful deploy](/images/THz_converter/Import_Screen_1.png)

## Save the .thz file
If the user wants to keep the data, simply press the “Export THz File” button to the bottom right corner and choose the folder path where the .thz file will be stored.

## Convert another dataset
Press the “Clear Memory” button in the first instance and confirm this action in the message shown. Then follow the procedure in the Load the raw dataset section to load another raw data file into the converter.

## Edit thickness and temperature information
![catsperMATconverter edit data](/images/THz_converter/Thickness_Edit.png)
The terahertz instrument might not record, e.g., the thickness of the sample (mm), sample weight (mg), and temperature (K) at which the measurements were undertaken. The converter allows user to input these data by editing the relevant fields in the tablet (rows #14, #15, and #16). Double-click the cell to edit the information and the value-change function will update the TCell then.

## Load the converted dataset (.thz file)
Occasionally, the user might export the converted dataset without the thickness and temperature data. The “IMPORT THz FILE” button enables the user to load back the converted .mat file into the converter and add extra data following the procedure outlined in the Load extra datasets for CSV file section. This functionality can also be used to check the .thz file.
